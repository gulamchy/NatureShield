<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Image Analyzer</title>
  </head>
  <body>
    <h1>Upload an Image</h1>
    <form
      id="uploadForm"
      enctype="multipart/form-data"
      action="http://127.0.0.1:5000/analyze"
      method="POST"
    >
      <label
        >Category:
        <select name="category">
          <option value="plants">Plants</option>
          <option value="birds">Birds</option>
          <option value="insects">Insects</option>
          <option value="mammals">Mammals</option>
        </select>
      </label>
      <br /><br />
      <input type="file" name="image" required />
      <button type="submit">Analyze</button>
    </form>

    <h2>Analysis Result:</h2>
    <pre id="result"></pre>

    <script>
      const form = document.getElementById("uploadForm");
      const result = document.getElementById("result");

      form.addEventListener("submit", async (e) => {
        e.preventDefault(); // Prevent the default form submission behavior
        const formData = new FormData(form); // Get the form data

        // Use fetch to send the form data to Flask backend
        const res = await fetch(form.action, {
          method: form.method,
          body: formData,
        });

        const data = await res.json(); // Parse the JSON response
        result.textContent = JSON.stringify(data, null, 2); // Display the result
      });
    </script>
  </body>
</html>
